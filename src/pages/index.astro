---
import Layout from '../layout.astro';
---

<script>
  const memes = [
    'https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExMW12bWVrdmh4NHAydGYyeG83cmhwMjU0aGlsbXBzYW9lenB0Y3o0NiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/l3q2B8po92FIG1LNe/giphy.gif',
    'https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExM3pjM2xpNGxvY2w0MTZwbjE4cmJ2eTEwa21uNjZxanpnNmFtMXk5NCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/4hP2T6OYpdBGqFjoPj/giphy.gif',
  ];

  const randomMeme = memes[Math.floor(Math.random() * memes.length)];
  const memeImage = document.querySelector('.meme-image');

  if (memeImage) {
    memeImage.src = randomMeme;
    memeImage.onload = () => {
      memeImage.classList.add('loaded');
      console.log('Meme loaded:', randomMeme);
    };
  }
</script>
<Layout>
  <main id="main">
    <img
      src="/assets/logo.svg"
      aria-label="Perfect Pitch logo"
      width="80"
      height="52"
    />
    <section id="pitch">
      <h1>
        Perfect Pitch er et kor av og for grÃ¼ndere tilknyttet startupmiljÃ¸et i
        Oslo som liker Ã¥ treffes, synge og henge
      </h1>
      <p>
        Vi har korÃ¸velse annenhverÂ tirsdag kl. 17 til kl. 19 (med korpils
        etterpÃ¥) â€” pÃ¥ Pakkhuset i Kvadraturen. ðŸŽ‰
      </p>
    </section>

    <section id="meme">
      <img
        src="https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExMW12bWVrdmh4NHAydGYyeG83cmhwMjU0aGlsbXBzYW9lenB0Y3o0NiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/l3q2B8po92FIG1LNe/giphy.gif"
        alt="En gif som viser en morsom Perfect Pitch situasjon"
        class="meme-image"
        loading="lazy"
      />
    </section>

    <section id="actions">
      <p>Vi har det gÃ¸y, helt enkelt â€“ lyst til Ã¥ bli med?</p>

      <div role="group" class="buttons">
        <a href="https://ppkor.no/join" class="button primary"> PÃ¥melding â†’ </a>
        <a
          class="button"
          href="https://www.linkedin.com/company/gr%C3%BCnderkoret-perfect-pitch/"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="BesÃ¸k vÃ¥r LinkedIn-side"
        >
          <img
            src="/assets/linkedin-icon.svg"
            alt="LinkedIn logo"
            width="20"
            height="20"
          /> LinkedIn
        </a>
      </div>
    </section>
  </main>
</Layout>

<style>
  main {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    /* center content */
    justify-content: center;

    width: min(100% - 4rem, 50rem);
    margin-inline: auto;
    margin-block: 2rem;
    max-width: 750px;
    min-height: 100dvh;

    gap: 3rem;
  }

  p {
    max-width: 60ch;
  }

  section {
    display: flex;
    flex-direction: column;

    gap: 1rem;
  }

  .buttons {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;

    gap: 0.5rem;
  }

  .button {
    background-color: hsl(0, 0%, 13%);
    padding-inline: 0.75rem;
    padding-block: 0.5rem;
    border-radius: 0.25rem;
    font-size: 1rem;

    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    text-decoration: none;
    color: white;
    font-weight: 500;
    min-height: 44px;
    min-width: 44px;

    &.primary {
      background-color: var(--color-brand, hsl(255, 64%, 38%));
    }
  }

  @media (hover: hover) {
    .button:hover {
      background-color: hsl(0, 0%, 30%);

      &.primary:hover {
        background-color: hsl(255, 64%, 48%);
      }
    }
  }

  .button:focus-visible {
    outline: 3px solid var(--color-brand, hsl(255, 64%, 38%));
    outline-offset: 3px;
  }

  .meme-image {
    height: 250px;
    visibility: hidden;
    opacity: 0;
    transition:
      visibility 0s,
      opacity 0.2s linear;
  }
  .meme-image.loaded {
    visibility: visible;
    opacity: 1;
  }

  @media screen and (max-width: 600px) {
    .meme-image {
      /* fit cover */
      object-fit: cover;
      width: 100%;
      height: 150px;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    :global(.loaded) {
      display: none;
    }
  }
</style>
